let activityPageParser=(e,r,t)=>{e={alias:"activity",data:{title:"–ö–æ–º–º–∏—Ç—ã, 1 –Ω–µ–¥–µ–ª—è",subtitle:`–°–ø—Ä–∏–Ω—Ç ‚Ññ ${e.getCurrentSprintId()}`,data:{mon:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],tue:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],wed:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],thu:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],fri:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],sat:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],sun:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}}};let a=e.data.data;return t.forEach(e=>{var t=e.timestamp-r.startAt,e=Math.floor(t/864e5),t=Math.floor(t%864e5/36e5);0===e&&a.mon[t]++,1===e&&a.tue[t]++,2===e&&a.wed[t]++,3===e&&a.thu[t]++,4===e&&a.fri[t]++,5===e&&a.sat[t]++,6===e&&a.sun[t]++}),e};module.exports={activityPageParser:activityPageParser};let chartPageParser=(t,e,r)=>{var a,s=t.getCurrentSprintId(),e={alias:"chart",data:{title:"–ö–æ–º–º–∏—Ç—ã",subtitle:`–°–ø—Ä–∏–Ω—Ç ‚Ññ ${s}`,users:e,values:[]}};let i=e.data.values;for(let e=-6;e<4;e++)0===e?i.push({title:s,value:r.length,active:!0}):s+e<=0||(a=t.getSprintById(s+e),a=t.getSprintCommits(a),i.push({title:s+e,value:a.length}));return e};module.exports={chartPageParser:chartPageParser};let diagramPageParser=e=>{var t=e.getCurrentSprintId();let r={alias:"diagram",data:{title:"–†–∞–∑–º–µ—Ä –∫–æ–º–º–∏—Ç–æ–≤",subtitle:`–°–ø—Ä–∏–Ω—Ç ‚Ññ ${t}`,totalText:"",differenceText:"",categories:[{title:"> 1001 —Å—Ç—Ä–æ–∫–∏",valueText:"",differenceText:""},{title:"501 ‚Äî 1000 —Å—Ç—Ä–æ–∫",valueText:"",differenceText:""},{title:"101 ‚Äî 500 —Å—Ç—Ä–æ–∫",valueText:"",differenceText:""},{title:"1 ‚Äî 100 —Å—Ç—Ä–æ–∫",valueText:"",differenceText:""}]}};function a(e,t){let r=e.getAllSummaries(),a=e.getSprintCommits(e.getSprintById(t)),s=[0,0,0,0];return a.forEach(e=>{let t=0;e.summaries.forEach(e=>{e=e.id??e;t+=r[e].added+r[e].removed}),1001<=t?s[0]++:501<=t?s[1]++:101<=t?s[2]++:1<=t&&s[3]++}),s}var s=e=>e.reduce((e,t)=>e+t),i=a(e,t-1),n=a(e,t);r.data.totalText=`${s(n)} –∫–æ–º–º–∏—Ç–∞`;s=s(n)-s(i);r.data.differenceText=`${0<=s?"+":""}${s} —Å –ø—Ä–æ—à–ª–æ–≥–æ —Å–ø—Ä–∏–Ω—Ç–∞`;for(let e=0;e<4;e++){r.data.categories[e].valueText=`${n[e]} –∫–æ–º–º–∏—Ç–æ–≤`;var l=n[e]-i[e];r.data.categories[e].differenceText=`${0<=l?"+":""}${l} –∫–æ–º–º–∏—Ç–æ–≤`}return r};module.exports={diagramPageParser:diagramPageParser};let votePageParser=require("./vote").votePageParser,leadersPageParser=require("./leaders").leadersPageParser,chartPageParser=require("./chart").chartPageParser,diagramPageParser=require("./diagram").diagramPageParser,activityPageParser=require("./activity").activityPageParser,controlPanel=require("./_controlPanel.js").controlPanel,prepareData=(e,{sprintId:t})=>{controlPanel.init(e,t);var r=controlPanel.getSprintById(t),a=controlPanel.getSprintCommits(r);let s=leadersPageParser(controlPanel,a,t);e=chartPageParser(controlPanel,s.data.users.slice(0,3),a),t=diagramPageParser(controlPanel),a=activityPageParser(controlPanel,r,a);return[votePageParser(controlPanel,r),s,e,t,a]};module.exports={prepareData:prepareData};let leadersPageParser=(e,t)=>{let r={alias:"leaders",data:{title:"–ë–æ–ª—å—à–µ –≤—Å–µ–≥–æ –∫–æ–º–º–∏—Ç–æ–≤",subtitle:`–°–ø—Ä–∏–Ω—Ç ‚Ññ ${e.getCurrentSprintId()}`,emoji:"üëë",users:[]}};var a,s=e.getAllUsers(),i=e.countUsersCommits(t);for(a in s){var n={...s[a],valueText:i[a]};r.data.users.push(n)}return r.data.users.sort((e,t)=>t.valueText-e.valueText),r};module.exports={leadersPageParser:leadersPageParser};let votePageParser=(e,t)=>{let r={alias:"vote",data:{title:"–°–∞–º—ã–π üîé –≤–Ω–∏–º–∞—Ç–µ–ª—å–Ω—ã–π —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫",subtitle:`–°–ø—Ä–∏–Ω—Ç ‚Ññ ${e.getCurrentSprintId()}`,emoji:"üîé",users:[]}};var a,s=e.getAllUsers(),i=e.countLikesToCommentsByUsers(t);for(a in i){var n={...s[a],valueText:i[a]};r.data.users.push(n)}return r.data.users.sort((e,t)=>t.valueText-e.valueText),r.data.users=r.data.users.map(e=>({...e,valueText:`${e.valueText} –≥–æ–ª–æ—Å–æ–≤`})),r};module.exports={votePageParser:votePageParser};let controlPanel={init:(e,t)=>{this.sprintId=t,this.undefinedSprint={startAt:-1,finishAt:-1},this._entities={User:{},Project:[],Sprint:[],Commit:[],Summary:{},Issue:[],Comment:[]},e.forEach(e=>{switch(e.type){case"User":this._entities.User[e.id]={id:e.id,name:e.name,avatar:e.avatar,valueText:""};break;case"Summary":this._entities.Summary[e.id]=e;break;case"Sprint":this._entities.Sprint[e.id]=e;default:this._entities[e.type].push(e)}})},getCurrentSprintId:()=>this.sprintId,getAllUsers:()=>this._entities.User,getAllSummaries:()=>this._entities.Summary,getSprintById:e=>{return this._entities.Sprint[e]??this.undefinedSprint},getSprintCommits:e=>{let{startAt:t,finishAt:r}=e,a=this._entities.Commit;return a.filter(e=>t<=e.timestamp&&e.timestamp<=r)},countUsersCommits:e=>{let t={};return e.forEach(e=>{e=e.author.id??e.author;e in t?t[e]+=1:t[e]=1}),t},countLikesToCommentsByUsers:e=>{let{startAt:r,finishAt:a}=e,t=this._entities.Comment,s={};return t.forEach(e=>{var t;r<=e.createdAt&&e.createdAt<=a&&((t=e.author.id??e.author)in s?s[t]+=(e.likes??[]).length:s[t]=(e.likes??[]).length)}),s}};module.exports={controlPanel:controlPanel};
//# sourceMappingURL=index.js.map
