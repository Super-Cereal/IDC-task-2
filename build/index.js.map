{"version":3,"file":"index.js","sources":["index.js"],"sourcesContent":["let activityPageParser = (controlPanel) => {\r\n  // —Å—Ñ–æ—Ä–º–∏—Ä—É–µ–º –¥–∞–Ω–Ω—ã–µ –¥–ª—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏\r\n  let curSprint = controlPanel.getCurrentSprint();\r\n  let parsedData = {\r\n    alias: \"activity\",\r\n    data: {\r\n      title: \"–ö–æ–º–º–∏—Ç—ã, 1 –Ω–µ–¥–µ–ª—è\",\r\n      subtitle: curSprint.name,\r\n      data: {\r\n        sun: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\r\n        mon: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\r\n        tue: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\r\n        wed: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\r\n        thu: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\r\n        fri: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\r\n        sat: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\r\n      },\r\n    },\r\n  };\r\n\r\n  let data = parsedData.data.data;\r\n  let curCommits = controlPanel.getCurrentCommits();\r\n  curCommits.forEach((commit) => {\r\n    let sinceWeekStart = commit.timestamp - curSprint.startAt;\r\n    let day = Math.floor(sinceWeekStart / (24 * 60 * 60 * 1000));\r\n    let sinceDayStart = sinceWeekStart % (24 * 60 * 60 * 1000);\r\n    let hour = sinceDayStart / (60 * 60 * 1000);\r\n    // –±–∞–≥ –≤ output.json –∏–ª–∏ –µ—â–µ –≥–¥–µ, –Ω–æ –ø—Ä–∏—à–ª–æ—Å—å —Å—Ç–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É -\r\n    // –µ—Å–ª–∏ –ø—Ä–æ—à–ª–æ 0.9 –ø–µ—Ä–≤–æ–≥–æ –¥–Ω—è - —Ç–æ —ç—Ç–æ —É–∂–µ –≤—Ç–æ—Ä–æ–π –¥–µ–Ω—å, –∑–Ω –ø—Ä–∏–±–∞–≤–∏–º –µ–¥–∏–Ω–∏—Ü—É\r\n    hour = Math.floor(hour) + (hour % 1 > 0.9 ? 1 : 0);\r\n    if (day === 0) data.sun[hour]++;\r\n    else if (day === 1) data.mon[hour]++;\r\n    else if (day === 2) data.tue[hour]++;\r\n    else if (day === 3) data.wed[hour]++;\r\n    else if (day === 4) data.thu[hour]++;\r\n    else if (day === 5) data.fri[hour]++;\r\n    else if (day === 6) data.sat[hour]++;\r\n  });\r\n  return parsedData;\r\n};\r\n\r\n\r\nlet chartPageParser = (controlPanel, topUsers) => {\r\n  // —Å—Ñ–æ—Ä–º–∏—Ä—É–µ–º –¥–∞–Ω–Ω—ã–µ –¥–ª—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã –¥–∏–∞–≥—Ä–∞–º–º—ã\r\n  let curSprint = controlPanel.getCurrentSprint();\r\n  let parsedData = {\r\n    alias: \"chart\",\r\n    data: {\r\n      title: \"–ö–æ–º–º–∏—Ç—ã\",\r\n      subtitle: curSprint.name,\r\n      users: topUsers,\r\n      values: [],\r\n    },\r\n  };\r\n\r\n  let curCommits = controlPanel.getCurrentCommits();\r\n  let values = parsedData.data.values;\r\n\r\n  let sprints = controlPanel.getAllSprints();\r\n  sprints.forEach((sprint) => {\r\n    let obj = { title: sprint.id, hint: sprint.name };\r\n    if (sprint.id === curSprint.id) {\r\n      obj.value = curCommits.length;\r\n      obj.active = true;\r\n    } else obj.value = controlPanel.getSprintCommits(sprint).length;\r\n    values.push(obj);\r\n  });\r\n\r\n  return parsedData;\r\n};\r\n\r\n\r\nlet diagramPageParser = (controlPanel) => {\r\n  // —Å—Ñ–æ—Ä–º–∏—Ä—É–µ–º –¥–∞–Ω–Ω—ã–µ –¥–ª—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã –∫—Ä—É–≥–æ–≤–æ–π –¥–∏–∞–≥—Ä–∞–º–º—ã\r\n  let curSprint = controlPanel.getCurrentSprint();\r\n  let parsedData = {\r\n    alias: \"diagram\",\r\n    data: {\r\n      title: \"–†–∞–∑–º–µ—Ä –∫–æ–º–º–∏—Ç–æ–≤\",\r\n      subtitle: curSprint.name,\r\n      totalText: \"\",\r\n      differenceText: \"\",\r\n      categories: [\r\n        { title: \"> 1001 —Å—Ç—Ä–æ–∫–∏\", valueText: \"\", differenceText: \"\" },\r\n        { title: \"501 ‚Äî 1000 —Å—Ç—Ä–æ–∫\", valueText: \"\", differenceText: \"\" },\r\n        { title: \"101 ‚Äî 500 —Å—Ç—Ä–æ–∫\", valueText: \"\", differenceText: \"\" },\r\n        { title: \"1 ‚Äî 100 —Å—Ç—Ä–æ–∫\", valueText: \"\", differenceText: \"\" },\r\n      ],\r\n    },\r\n  };\r\n\r\n  function countSizeOfCommitsOfSprint(controlPanel, sprint) {\r\n    let summaries = controlPanel.getAllSummaries();\r\n    let commits = controlPanel.getSprintCommits(sprint);\r\n\r\n    // [0: > 1001, 1: 501 - 1000, 2: 101 - 500, 3: 1 - 100]\r\n    let res = [0, 0, 0, 0];\r\n    commits.forEach((commit) => {\r\n      let size = 0;\r\n      commit.summaries.forEach((summary) => {\r\n        let summaryId = summary.id ?? summary;\r\n        size += summaries[summaryId].added + summaries[summaryId].removed;\r\n      });\r\n      if (size >= 1001) res[0]++;\r\n      else if (size >= 501) res[1]++;\r\n      else if (size >= 101) res[2]++;\r\n      else if (size >= 1) res[3]++;\r\n    });\r\n    return res;\r\n  }\r\n  const sum = (array) => array.reduce((prev, cur) => prev + cur);\r\n\r\n  let lastSprint = controlPanel.getSprintById(curSprint.id - 1);\r\n  let lastSizes = countSizeOfCommitsOfSprint(controlPanel, lastSprint);\r\n  let curSizes = countSizeOfCommitsOfSprint(controlPanel, curSprint);\r\n  let word;\r\n\r\n  word = controlPanel.getNoun(sum(curSizes), \"–∫–æ–º–º–∏—Ç\", \"–∫–æ–º–º–∏—Ç–∞\", \"–∫–æ–º–º–∏—Ç–æ–≤\");\r\n  parsedData.data.totalText = `${sum(curSizes)} ${word}`;\r\n  let val = sum(curSizes) - sum(lastSizes);\r\n  parsedData.data.differenceText = `${val >= 0 ? \"+\" : \"\"}${val} —Å –ø—Ä–æ—à–ª–æ–≥–æ —Å–ø—Ä–∏–Ω—Ç–∞`;\r\n\r\n  for (let i = 0; i < 4; i++) {\r\n    word = controlPanel.getNoun(curSizes[i], \"–∫–æ–º–º–∏—Ç\", \"–∫–æ–º–º–∏—Ç–∞\", \"–∫–æ–º–º–∏—Ç–æ–≤\");\r\n    parsedData.data.categories[i].valueText = `${curSizes[i]} ${word}`;\r\n\r\n    let val = curSizes[i] - lastSizes[i];\r\n    word = controlPanel.getNoun(val, \"–∫–æ–º–º–∏—Ç\", \"–∫–æ–º–º–∏—Ç–∞\", \"–∫–æ–º–º–∏—Ç–æ–≤\");\r\n    parsedData.data.categories[i].differenceText = `${val >= 0 ? \"+\" : \"\"}${val} –∫–æ–º–º–∏—Ç–æ–≤`;\r\n  }\r\n\r\n  return parsedData;\r\n};\r\n\r\n\r\n\r\nlet prepareData = (entities, { sprintId }) => {\r\n  let controlPanel = new ControlPanel(entities, sprintId);\r\n\r\n  let voteData = votePageParser(controlPanel);\r\n  let leadersData = leadersPageParser(controlPanel);\r\n  let chartData = chartPageParser(controlPanel, leadersData.data.users);\r\n  let diagramData = diagramPageParser(controlPanel);\r\n  let activityData = activityPageParser(controlPanel);\r\n  return [voteData, leadersData, chartData, diagramData, activityData];\r\n};\r\n\r\n\r\n\r\nlet leadersPageParser = (controlPanel) => {\r\n  // —Å—Ñ–æ—Ä–º–∏—Ä—É–µ–º –¥–∞–Ω–Ω—ã–µ –¥–ª—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã –ª–∏–¥–µ—Ä–æ–≤\r\n  let curSprint = controlPanel.getCurrentSprint();\r\n  let parsedData = {\r\n    alias: \"leaders\",\r\n    data: {\r\n      title: \"–ë–æ–ª—å—à–µ –≤—Å–µ–≥–æ –∫–æ–º–º–∏—Ç–æ–≤\",\r\n      subtitle: curSprint.name,\r\n      emoji: \"üëë\",\r\n      users: [],\r\n    },\r\n  };\r\n\r\n  let commits = controlPanel.getCurrentCommits()\r\n  let usersCommitsCount = controlPanel.countUsersCommits(commits);\r\n  let users = controlPanel.getAllUsers();\r\n  for (let userId in users) {\r\n    let x = { ...users[userId], valueText: `${usersCommitsCount[userId]}` };\r\n    parsedData.data.users.push(x);\r\n  }\r\n  // —Å–æ—Ä—Ç–∏—Ä—É–µ–º –≤ –ø–æ—Ä—è–¥–∫–µ —É–±—ã–≤–∞–Ω–∏—è —á–∏—Å–ª–∞ –∫–æ–º–º–∏—Ç–æ–≤\r\n  parsedData.data.users.sort((prev, cur) => cur.valueText - prev.valueText);\r\n\r\n  return parsedData;\r\n};\r\n\r\n\r\nlet votePageParser = (controlPanel) => {\r\n  // —Å—Ñ–æ—Ä–º–∏—Ä—É–µ–º –¥–∞–Ω–Ω—ã–µ –¥–ª—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏—è\r\n  let curSprint = controlPanel.getCurrentSprint();\r\n  let parsedData = {\r\n    alias: \"vote\",\r\n    data: {\r\n      title: \"–°–∞–º—ã–π üîé –≤–Ω–∏–º–∞—Ç–µ–ª—å–Ω—ã–π —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫\",\r\n      subtitle: curSprint.name,\r\n      emoji: \"üîé\",\r\n      users: [],\r\n    },\r\n  };\r\n\r\n  let users = controlPanel.getAllUsers();\r\n  let usersLikesCount = controlPanel.countLikesToUsers(curSprint);\r\n  for (let userId in usersLikesCount) {\r\n    let x = { ...users[userId], valueText: usersLikesCount[userId] };\r\n    parsedData.data.users.push(x);\r\n  }\r\n  parsedData.data.users.sort((prev, cur) => cur.valueText - prev.valueText);\r\n  parsedData.data.users = parsedData.data.users.map((user) => {\r\n    let word = controlPanel.getNoun(user.valueText, \"–≥–æ–ª–æ—Å\", \"–≥–æ–ª–æ—Å–∞\", \"–≥–æ–ª–æ—Å–æ–≤\")\r\n    return {\r\n      ...user,\r\n      valueText: `${user.valueText} ${word}`,\r\n    };\r\n  });\r\n  return parsedData;\r\n};\r\n\r\n\r\nconst ControlPanel = class {\r\n  constructor(entities, sprintId) {\r\n    // —Å—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–ª –æ–±—å–µ–∫—Ç this.entities = { entityName: any }\r\n    // User, Summary —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –æ–±—å–µ–∫—Ç–µ { entityId: Entity }\r\n    // –æ—Å—Ç–∞–ª—å–Ω—ã–µ —Å—É—â–Ω–æ—Å—Ç–∏ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –º–∞—Å—Å–∏–≤–∞—Ö Entity[]\r\n    this._sortEntities(entities);\r\n    // –∑–∞–≥–ª—É—à–∫–∞ - –µ—Å–ª–∏ –Ω—É–∂–Ω—ã–π —Å–ø—Ä–∏–Ω—Ç –Ω–µ –Ω–∞–π–¥–µ—Ç—Å—è, —Ç–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è undefinedSprint\r\n    this._sprintId = sprintId;\r\n    this._currentSprint = this.getSprintById(sprintId);\r\n    this._currentCommits = this.getSprintCommits(this._currentSprint);\r\n    this._undefinedSprint = { startAt: -1, finishAt: -1 };\r\n  }\r\n  _sortEntities(entities) {\r\n    this._entities = {\r\n      User: {},\r\n      Project: [],\r\n      Sprint: [],\r\n      Commit: [],\r\n      Summary: {},\r\n      Issue: [],\r\n      Comment: [],\r\n    };\r\n    entities.forEach((entity) => {\r\n      switch (entity.type) {\r\n        case \"User\":\r\n          this._entities.User[entity.id] = {\r\n            id: entity.id,\r\n            name: entity.name,\r\n            avatar: entity.avatar,\r\n            valueText: \"\",\r\n          };\r\n          break;\r\n        case \"Summary\":\r\n          this._entities.Summary[entity.id] = entity;\r\n          break;\r\n        default:\r\n          this._entities[entity.type].push(entity);\r\n          break;\r\n      }\r\n    });\r\n    // –æ—Ç—Å–æ—Ä—Ç–∏—Ä—É–µ–º –≤—Å–µ –∫–æ–º–º–∏—Ç—ã –ø–æ –≤—Ä–µ–º–µ–Ω–∏ —Å–æ–∑–¥–∞–Ω–∏—è, –¥–∞–±—ã –≤ –¥–∞–ª—å–Ω–µ–π—à–µ–º\r\n    // –º—ã –º–æ–≥–ª–∏ –±—ã –±—ã—Å—Ç—Ä–µ–µ —Å—á–∏—Ç–∞—Ç—å –∫–æ–ª-–≤–æ –∫–æ–º–º–∏—Ç–æ–≤ –∑–∞\r\n    // –¥–∞–Ω–Ω—ã–π –ø–µ—Ä–æ–¥ –≤—Ä–µ–º–µ–Ω–∏ —Å –ø–æ–º–æ—â—å—é –±–∏–Ω–ø–æ–∏—Å–∫–∞\r\n    this._entities.Commit.sort((a, b) => a.timestamp - b.timestamp);\r\n    // —Å–ø—Ä–∏–Ω—Ç—ã —Å–æ—Ä—Ç–∏—Ä—É–µ–º —á—Ç–æ–±—ã –ø—Ä–æ—â–µ —Å–æ—Å—Ç–∞–≤–∏—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É chart\r\n    this._entities.Sprint.sort((a, b) => a.startAt - b.startAt);\r\n  }\r\n  getCurrentSprint() {\r\n    return this._currentSprint;\r\n  }\r\n  getCurrentCommits() {\r\n    return this._currentCommits;\r\n  }\r\n  getAllUsers() {\r\n    return this._entities.User;\r\n  }\r\n  getAllSummaries() {\r\n    return this._entities.Summary;\r\n  }\r\n  getAllSprints() {\r\n    return this._entities.Sprint;\r\n  }\r\n  getSprintById(sprintId) {\r\n    // –Ω–∞—Ö–æ–¥–∏—Ç —Å–ø—Ä–∏–Ω—Ç –ø–æ –µ–≥–æ id –∏ –µ—Å–ª–∏ –µ–≥–æ –Ω–µ—Ç, –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∑–∞–≥–ª—É—à–∫—É\r\n    let sprints = this._entities.Sprint;\r\n    for (let i in sprints) if (sprints[i].id === sprintId) return sprints[i];\r\n    return this._undefinedSprint;\r\n  }\r\n  getSprintCommits(sprint) {\r\n    // –Ω–∞—Ö–æ–¥–∏—Ç –≤—Å–µ –∫–æ–º–º–∏—Ç—ã –∑–∞ —Å–ø—Ä–∏–Ω—Ç: Commit[]\r\n    let { startAt, finishAt } = sprint;\r\n    let commits = this._entities.Commit;\r\n    // –Ω–∞—Ö–æ–¥–∏—Ç –∏–Ω–¥–µ–∫—Å—ã –ø–µ—Ä–≤–æ–≥–æ –∏ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –∑–∞ —Å–ø—Ä–∏–Ω—Ç –∫–æ–º–º–∏—Ç–æ–≤\r\n    let leftIndex = this._getSprintCommitsBinSearch(commits, startAt, \"left\");\r\n    let rightIndex = this._getSprintCommitsBinSearch(commits, finishAt, \"right\");\r\n    return commits.slice(leftIndex, rightIndex + 1);\r\n  }\r\n  _getSprintCommitsBinSearch(commits, timestamp, borderSide) {\r\n    let l, r, mid;\r\n    switch (borderSide) {\r\n      case \"left\":\r\n        l = -1;\r\n        r = commits.length;\r\n        while (r - l > 1) {\r\n          mid = Math.floor((r + l) / 2);\r\n          if (commits[mid].timestamp < timestamp) l = mid;\r\n          else r = mid;\r\n        }\r\n        return r;\r\n      case \"right\":\r\n        l = 0;\r\n        r = commits.length;\r\n        while (r - l > 1) {\r\n          mid = Math.floor((r + l) / 2);\r\n          if (commits[mid].timestamp <= timestamp) l = mid;\r\n          else r = mid;\r\n        }\r\n        return l;\r\n    }\r\n  }\r\n  countUsersCommits(commits) {\r\n    // —Å—á–∏—Ç–∞–µ—Ç —Å–∫–æ–ª—å–∫–æ —é–∑–µ—Ä—ã —Å–¥–µ–ª–∞–ª–∏ –∫–æ–º–º–∏—Ç–æ–≤: {userId: countOfCommits}\r\n    let usersCommitsCount = {};\r\n    commits.forEach((commit) => {\r\n      let id = commit.author.id ?? commit.author;\r\n      if (id in usersCommitsCount) usersCommitsCount[id] += 1;\r\n      else usersCommitsCount[id] = 1;\r\n    });\r\n    return usersCommitsCount;\r\n  }\r\n  countLikesToUsers(sprint) {\r\n    // —Å—á–∏—Ç–∞–µ—Ç –ª–∞–π–∫–∏ –Ω–∞ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ —é–∑–µ—Ä–æ–≤: {userId: countOfLikesToComments}\r\n    let { startAt, finishAt } = sprint;\r\n    let comments = this._entities.Comment;\r\n\r\n    let likesToCommentsByUsers = {};\r\n    comments.forEach((comment) => {\r\n      if (startAt <= comment.createdAt && comment.createdAt <= finishAt) {\r\n        let id = comment.author.id ?? comment.author;\r\n        if (id in likesToCommentsByUsers)\r\n          likesToCommentsByUsers[id] += (comment.likes ?? []).length;\r\n        else likesToCommentsByUsers[id] = (comment.likes ?? []).length;\r\n      }\r\n    });\r\n    return likesToCommentsByUsers;\r\n  }\r\n  getNoun(number, one, two, five) {\r\n    // —Å–∫–æ–ª–æ–Ω—è–µ—Ç —Å–ª–æ–≤–æ one_two_five –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —á–∏—Å–ª–∞\r\n    let n = Math.abs(number);\r\n    n %= 100;\r\n    if (n >= 5 && n <= 20) {\r\n      return five;\r\n    }\r\n    n %= 10;\r\n    if (n === 1) {\r\n      return one;\r\n    }\r\n    if (n >= 2 && n <= 4) {\r\n      return two;\r\n    }\r\n    return five;\r\n  }\r\n};\r\n\r\nmodule.exports = { prepareData };\r\n\r\n//# sourceMappingURL=index.js.map\r\n"],"names":["activityPageParser","curSprint","controlPanel","getCurrentSprint","parsedData","alias","data","title","subtitle","name","sun","mon","tue","wed","thu","fri","sat","curCommits","getCurrentCommits","forEach","sinceWeekStart","commit","timestamp","startAt","day","Math","floor","hour","chartPageParser","topUsers","users","values","sprints","getAllSprints","obj","sprint","id","hint","value","length","active","getSprintCommits","push","diagramPageParser","totalText","differenceText","categories","valueText","countSizeOfCommitsOfSprint","summaries","getAllSummaries","commits","res","size","summaryId","summary","added","removed","sum","array","reduce","prev","cur","lastSprint","getSprintById","lastSizes","curSizes","word","getNoun","val","i","prepareData","entities","sprintId","ControlPanel","voteData","votePageParser","leadersData","leadersPageParser","emoji","userId","usersCommitsCount","countUsersCommits","getAllUsers","x","sort","usersLikesCount","countLikesToUsers","map","user","this","_sortEntities","_sprintId","_currentSprint","_currentCommits","_undefinedSprint","finishAt","_entities","User","Project","Sprint","Commit","Summary","Issue","Comment","entity","type","avatar","a","b","leftIndex","_getSprintCommitsBinSearch","rightIndex","slice","borderSide","l","r","mid","author","comments","likesToCommentsByUsers","comment","createdAt","likes","number","one","two","five","n","abs","module","exports"],"mappings":"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"}